<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Daily scheduler: Auto-bucket shipped pickings whose EDD has passed -->
    <record id="ir_cron_autobucket_missed_edd" model="ir.cron">
        <field name="name">Delivery: Auto-Bucket Missed EDD</field>
        <field name="model_id" ref="stock.model_stock_picking"/>
        <field name="state">code</field>
        <field name="code">model.cron_autobucket_missed_edd()</field>
        <!-- Run daily at 02:15 server time -->
        <field name="interval_type">days</field>
        <field name="interval_number">1</field>
        <field name="numbercall">-1</field>
        <field name="active">True</field>
        <field name="doall">False</field>
        <field name="nextcall" eval="(DateTime.today().replace(hour=2, minute=15, second=0, microsecond=0)).strftime('%Y-%m-%d %H:%M:%S')"/>
    </record>

    <!-- (Optional later) Second cron to refine via API (disabled by default) -->
    <record id="ir_cron_refine_status_via_api" model="ir.cron">
        <field name="name">Delivery: Refine Status via Carrier API</field>
        <field name="model_id" ref="stock.model_stock_picking"/>
        <field name="state">code</field>
        <field name="code">model.cron_refine_status_via_api()</field>
        <field name="interval_type">hours</field>
        <field name="interval_number">6</field>
        <field name="numbercall">-1</field>
        <field name="active">False</field>
        <field name="doall">False</field>
        <field name="nextcall" eval="(DateTime.today().replace(hour=3, minute=0, second=0, microsecond=0)).strftime('%Y-%m-%d %H:%M:%S')"/>
    </record>
</odoo>
