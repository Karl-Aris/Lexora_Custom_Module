<odoo>
  <template id="template_product_configuration" name="Product Configuration">
    <t t-call="website.layout">
      <div class="container my-5">
        <div class="row">
          <div class="col-12">
            <h2>Product Information</h2>
          </div>
        </div>

        <t t-if="product">
          <div class="row mt-4">
            <!-- Left: Image -->
            <div class="col-md-6 text-center">
              <t t-if="product.image_1920">
                <img t-att-src="'data:image/png;base64,%s' % product.image_1920.decode('utf-8')" 
                     class="img-fluid rounded shadow-sm"
                     alt="Product Image"
                     style="max-height: 500px;"/>
              </t>
              <t t-else="">
                <div class="alert alert-secondary" role="alert">
                  No image available.
                </div>
              </t>
            </div>

            <!-- Right: Details -->
            <div class="col-md-6">
              <div class="mb-4">
                <h3><t t-esc="product.name"/></h3>
                <p><strong>Price:</strong>
                  <t t-esc="product.standard_price"/> <span t-esc="product.currency_id.symbol"/>
                </p>
                <p><strong>Description:</strong></p>
                <div t-if="product.description_sale">
                  <t t-raw="product.description_sale"/>
                </div>
                <div t-else="">
                  <em>No description provided.</em>
                </div>
              </div>

              <!-- Select Size -->
              <div class="d-flex align-items-center mb-2">
                <span class="d-inline-flex justify-content-center align-items-center rounded-circle bg-secondary text-white me-2" style="width: 28px; height: 28px; font-size: 0.9rem;">
                  1
                </span>
                <p class="mb-0"><strong>Select Size</strong> (required)</p>
              </div>
              <div class="row">
                <t t-if="related_sizes">
                  <t t-foreach="related_sizes" t-as="variant">
                    <div class="col-6 col-md-2 mb-3">
                      <a t-att-href="'/store/cabinet?cabinet_sku=' + variant.default_code" class="text-decoration-none text-dark">
                        <t t-set="is_active" t-value="variant.default_code == product.default_code"/>
                        <div t-attf-class="card size-card shadow-sm text-center #{'border border-primary' if is_active else ''}">
                          <t t-if="variant.image_1920">
                            <img t-att-src="'data:image/png;base64,%s' % variant.image_1920.decode('utf-8')"
                                 class="card-img-top img-fluid"
                                 alt="Variant Image"
                                 style="padding: 10px; max-height: 130px; object-fit: contain;"/>
                          </t>
                          <t t-else="">
                            <div class="p-3 text-muted">No image</div>
                          </t>
                          <div class="card-body p-2">
                            <t t-set="size_tag" t-value="variant.product_tmpl_id.product_tag_ids.filtered(lambda tag: tag.name.isdigit())"/>
                            <h5 class="card-title fw-semibold mb-0" style="font-size: 1.4rem;">
                              <t t-esc="' / '.join(size_tag.mapped('name')) if size_tag else 'N/A'"/>
                            </h5>
                          </div>
                        </div>
                      </a>
                    </div>
                  </t>
                </t>
                <t t-else="">
                  <div class="alert alert-info">No sizes available in this collection.</div>
                </t>
              </div>

              <!-- Select Countertops -->
              <hr class="my-2"/>
              <div class="d-flex align-items-center mb-2">
                <span class="d-inline-flex justify-content-center align-items-center rounded-circle bg-secondary text-white me-2"
                      style="width: 28px; height: 28px; font-size: 0.9rem;">2</span>
                <p class="mb-0"><strong>Select Countertop</strong></p>
              </div>
              <t t-if="related_countertops">
                <div class="row">
                  <t t-foreach="related_countertops" t-as="countertop">
                    <div class="col-6 col-sm-4 col-md-3 col-lg-3 mb-3">
                      <a t-att-href="'/store/cabinet?cabinet_sku=' + product.default_code + '&amp;counter_top_sku=' + countertop.default_code"
                         class="text-decoration-none text-dark">
                        <t t-set="is_active_top" t-value="selected_countertop and countertop.id == selected_countertop.id"/>
                        <div t-attf-class="card size-card shadow-sm text-center #{'border border-primary' if is_active_top else ''}">
                          <t t-if="countertop.image_1920">
                            <img t-att-src="'data:image/png;base64,%s' % countertop.image_1920.decode('utf-8')"
                                 class="card-img-top img-fluid"
                                 alt="Countertop Image"
                                 style="padding: 10px; max-height: 130px; object-fit: contain;"/>
                          </t>
                          <t t-else="">
                            <img t-att-src="'/web/static/src/img/placeholder.png'"
                                 class="card-img-top img-fluid"
                                 alt="Default Image"
                                 style="padding: 10px; max-height: 130px; object-fit: contain;"/>
                          </t>
                          <div class="card-body p-2">
                            <h5 class="card-title fw-semibold mb-0" style="font-size: 1.2rem;">
                              <t t-esc="countertop.name"/>
                            </h5>
                          </div>
                        </div>
                      </a>
                    </div>
                  </t>
                </div>
              </t>
              <t t-else="">
                <div class="alert alert-info">No countertop available in this configuration.</div>
              </t>

              <!-- Select Mirror -->
              <hr class="my-2"/>
              <div class="d-flex align-items-center mb-2">
                <span class="d-inline-flex justify-content-center align-items-center rounded-circle bg-secondary text-white me-2"
                      style="width:28px;height:28px;font-size:0.9rem;">3</span>
                <p class="mb-0"><strong>Select Mirror</strong></p>
              </div>
              <t t-if="related_mirrors">
                <div class="row">
                  <t t-foreach="related_mirrors" t-as="mirror">
                    <div class="col-6 col-sm-4 col-md-3 col-lg-3 mb-3">
                      <a t-att-href="'/store/cabinet?cabinet_sku=' + product.default_code + '&amp;mirror_sku=' + mirror.default_code"
                         class="text-decoration-none text-dark">
                        <t t-set="is_active_mirror" t-value="selected_mirror and mirror.id == selected_mirror.id"/>
                        <div t-attf-class="card size-card shadow-sm text-center #{'border border-primary' if is_active_mirror else ''}">
                          <t t-if="mirror.image_1920">
                            <img t-att-src="'data:image/png;base64,%s' % mirror.image_1920.decode('utf-8')"
                                 class="card-img-top img-fluid"
                                 alt="Mirror Image"
                                 style="padding:10px;max-height:130px;object-fit:contain;"/>
                          </t>
                          <t t-else="">
                            <img t-att-src="'/web/static/src/img/placeholder.png'"
                                 class="card-img-top img-fluid"
                                 alt="No image"
                                 style="padding:10px;max-height:130px;object-fit:contain;"/>
                          </t>
                          <div class="card-body p-2">
                            <h5 class="card-title fw-semibold mb-0" style="font-size:1.2rem;">
                              <t t-esc="mirror.name"/>
                            </h5>
                          </div>
                        </div>
                      </a>
                    </div>
                  </t>
                </div>
              </t>
              <t t-else="">
                <div class="alert alert-info">No mirrors available in this configuration.</div>
              </t>

              <!-- Select Faucet -->
              <hr class="my-2"/>
              <div class="d-flex align-items-center mb-2">
                <span class="d-inline-flex justify-content-center align-items-center rounded-circle bg-secondary text-white me-2"
                      style="width: 28px; height: 28px; font-size: 0.9rem;">4</span>
                <p class="mb-0"><strong>Select Faucet</strong></p>
              </div>
              <t t-if="related_faucets">
                <div class="row">
                  <t t-foreach="related_faucets" t-as="faucet">
                    <div class="col-6 col-sm-4 col-md-3 col-lg-3 mb-3">
<a t-att-href="'/store/cabinet?cabinet_sku=' + product.default_code + '&amp;faucet_sku=' + faucet.default_code" class="text-decoration-none text-dark">
<t t-set="is_active_faucet" t-value="selected_faucet and faucet.id == selected_faucet.id"/>
<div t-attf-class="card size-card shadow-sm text-center #{'border border-primary' if is_active_faucet else ''}">
<t t-if="faucet.image_1920">
<img t-att-src="'data:image/png;base64,%s' % faucet.image_1920.decode('utf-8')" class="card-img-top img-fluid" alt="Faucet Image" style="padding:10px;max-height:130px;object-fit:contain;"/>
</t>
<t t-else="">
<img t-att-src="'/web/static/src/img/placeholder.png'" class="card-img-top img-fluid" alt="No image" style="padding:10px;max-height:130px;object-fit:contain;"/>
</t>
<div class="card-body p-2">
<h5 class="card-title fw-semibold mb-0" style="font-size:1.2rem;">
<t t-esc="faucet.name"/>
</h5>
</div>
</div>
</a>
</div>
</t>
</div>
</t>
<t t-else="">
<div class="alert alert-info">No faucets available in this configuration.</div>
</t> 
</div> <!-- end right column -->
      </div> <!-- end row -->
    </t>

    <t t-else="">
      <div class="alert alert-warning mt-4">
        Product not found. Please check your SKU or try another product.
      </div>
    </t>
  </div>
</t>
</template> 
</odoo>
